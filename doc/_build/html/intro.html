

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Introduction &mdash; GEARSHIFT TOOL 1.1.2 documentation</title>



  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />










  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->


      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>

    <script type="text/javascript" src="_static/js/theme.js"></script>


    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="Python Gearshift Calculation Tool" href="index.html" />
</head>

<body class="wy-body-for-nav">


  <div class="wy-grid-for-nav">

    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



            <a href="index.html" class="icon icon-home"> GEARSHIFT TOOL



          </a>







<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>


        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">






              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#input-file">Input File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#quick-start">Quick-Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cmd-line-usage">Cmd-line usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-data">Load data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dispatcher">Dispatcher</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Gearshift Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>



        </div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


      <nav class="wy-nav-top" aria-label="top navigation">

          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GEARSHIFT TOOL</a>

      </nav>


      <div class="wy-nav-content">

        <div class="rst-content">



















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">

      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>

      <li>Introduction</li>


      <li class="wy-breadcrumbs-aside">


            <a href="_sources/intro.rst.txt" rel="nofollow"> View page source</a>


      </li>

  </ul>


  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>The aim of the Gearshift tool is obtain the Required Engine Speeds, the Available Powers, the Required Vehicle Speeds
and the Gears for the whole WLTC based on the vehicle characteristics. The model should allow accurate calculation
of final trace and the operating conditions of the engine.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The calculator accepts as input an excel file  that contains the vehicle’s technical data, along with parameters for
modifying the execution WLTC cycle, and it then spits-out the gear-shifts of the vehicle and the others parameters used
during the obtaining of these. It does not calculate any CO<sub>2</sub> emissions.</p>
</div>
<div class="section" id="input-file">
<h2>Input File<a class="headerlink" href="#input-file" title="Permalink to this headline">¶</a></h2>
<img alt="_images/about_sheet.PNG" src="_images/about_sheet.PNG" />
<p>The input file of the GEARSHIFT tool is an excel file, structured in different sheets.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Case sheet:</strong> The case sheet contains a list of cases that the tool will run.</p></li>
<li><p><strong>Vehicle sheet:</strong> The vehicle sheet contains a list of vehicles along with their characteristics.</p></li>
<li><p><strong>Engine sheet:</strong> The engine sheet contains the vehicle’s full load curves.</p></li>
<li><p><strong>Gearbox Ratios sheet:</strong> The gearbox ratios sheet contains the gearbox transmission ratios.</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="quick-start">
<h1>Quick-Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cmd-line-usage">
<h2>Cmd-line usage<a class="headerlink" href="#cmd-line-usage" title="Permalink to this headline">¶</a></h2>
<p>The command-line usage below requires the Python environment to be installed, and provides for
executing an experiment directly from the OS’s shell (i.e. <code class="docutils literal notranslate"><span class="pre">cmd</span></code> in windows or <code class="docutils literal notranslate"><span class="pre">bash</span></code> in POSIX),
and in a <em>single</em> command.  To have precise control over the inputs and outputs</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ gearshift --help                                                  <span class="c1">## to get generic help for cmd-line syntax</span>
$ gearshift demo                                                    <span class="c1">## to get demo input file</span>
$ gearshift run <span class="s2">&quot;path_input_file&quot;</span> -O <span class="s2">&quot;path_to_save_output_file&quot;</span>     <span class="c1">## to run gearshift tool</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>In this example we will use gearshift model in order to predict the gears.</p>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>Import dispatcher(dsp) from gearshift tool that contains functions and simulation model to process vehicle data and Import also
schedula for selecting and executing functions. for more information on how to use <a class="reference external" href="https://pypi.org/project/schedula/">schedula</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gearshift.core</span> <span class="kn">import</span> <span class="n">dsp</span>
<span class="kn">import</span> <span class="nn">schedula</span> <span class="k">as</span> <span class="nn">sh</span>
</pre></div>
</div>
</div>
<div class="section" id="load-data">
<h2>Load data<a class="headerlink" href="#load-data" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Load vehicle data for a specific vehicle from <a class="reference external" href="https://github.com/JRCSTU/gearshift_calculation_tool/raw/main/gearshift/demos/gs_input_demo.xlsx">excel template</a></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">vehData</span> <span class="o">=</span> <span class="s1">&#39;gs_input_demo.xlsx&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Define the input dictionary for the dispacher.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">input_file_name</span><span class="o">=</span><span class="n">vehData</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="dispatcher">
<h2>Dispatcher<a class="headerlink" href="#dispatcher" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Dispatcher will select and execute the proper functions for the given inputs and the requested outputs</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">core</span> <span class="o">=</span> <span class="n">dsp</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sol&#39;</span><span class="p">],</span> <span class="n">shrink</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Plot workflow of the core model from the dispatcher</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">core</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>This will automatically open an internet browser and show the work flow of the core model as below.
You can click all the rectangular boxes to see in detail sub models like load, model, write and plot.</p>
<blockquote>
<div><div class="align-center figure">
<img alt="alternate text" src="_images/core_plot.PNG" />
</div>
</div></blockquote>
<p>The load module</p>
<blockquote>
<div><div class="align-center figure">
<img alt="alternate text" src="_images/load_core_plot.PNG" />
</div>
</div></blockquote>
</li>
</ul>
<ul>
<li><p>Load outputs of dispatcher Select the chosen dictionary key (sol) from the given dictionary.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">solution</span> <span class="o">=</span> <span class="n">sh</span><span class="o">.</span><span class="n">selector</span><span class="p">([</span><span class="s1">&#39;sol&#39;</span><span class="p">],</span> <span class="n">sh</span><span class="o">.</span><span class="n">selector</span><span class="p">([</span><span class="s1">&#39;sol&#39;</span><span class="p">],</span> <span class="n">core</span><span class="p">))</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Select each output case</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select first case</span>
<span class="n">solution</span><span class="p">[</span><span class="s1">&#39;sol&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Select second case case</span>
<span class="n">solution</span><span class="p">[</span><span class="s1">&#39;sol&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># Select gears output for different cases</span>
<span class="n">gears</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">sol</span> <span class="ow">in</span> <span class="n">solution</span><span class="p">[</span><span class="s1">&#39;sol&#39;</span><span class="p">]:</span>
    <span class="n">gears</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;gears_</span><span class="si">{</span><span class="n">sol</span><span class="p">[</span><span class="s2">&quot;Case&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sol</span><span class="p">[</span><span class="s1">&#39;GearsOutput&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
</div>


           </div>

          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Python Gearshift Calculation Tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2013-2020, European Commission (JRC).

    </p>
  </div>



    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a

    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>

    provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>
        </div>
      </div>

    </section>

  </div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>






</body>
</html>
